<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Swagger UI</title>
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700|Source+Code+Pro:300,600|Titillium+Web:400,600,700" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/swagger-ui/3.24.2/swagger-ui.css" >
  <style>
    html
    {
      box-sizing: border-box;
      overflow: -moz-scrollbars-vertical;
      overflow-y: scroll;
    }
    *,
    *:before,
    *:after
    {
      box-sizing: inherit;
    }
    body {
      margin:0;
      background: #fafafa;
    }
  </style>
</head>
<body>
<div id="swagger-ui"></div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/swagger-ui/3.24.2/swagger-ui-bundle.js"> </script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/swagger-ui/3.24.2/swagger-ui-standalone-preset.js"> </script>
<script>
window.onload = function() {
  var spec = {"openapi": "3.0.3", "info": {"title": "Sky's Auth System", "description": "This is the authentication system for Sky's webservers and websites.<br> Some endpoints require \"Super Admin\" authentication. These will be marked as such, and can only be used by users with the appropriate permissions. These generally include the project endpoints, and some administration endpoints.", "contact": {"email": "auth@skystuff.cc"}, "version": "1.0.0"}, "servers": [{"url": "https://auth.skystuff.cc/api/"}], "tags": [{"name": "API Keys", "description": "Keys to use with third party services. Generally managed by those third party services."}, {"name": "Users", "description": "API Endpoints to manage users."}, {"name": "Projects", "description": "API Endpoints to manage projects. Some of these require Super Admin."}], "security": [{"bearerAuth": []}, {"cookieAuth": []}], "paths": {"/key/{key}/": {"get": {"tags": ["API Keys"], "summary": "Get information about an API Key.", "parameters": [{"in": "path", "name": "key", "schema": {"type": "string"}, "required": true, "description": "128 character API key to get details about."}], "description": "Get details about an API key, including the permissions of it, the user who owns it, and the pretty name.", "operationId": "key.getKey", "responses": {"200": {"description": "Successful operation", "content": {"application/json": {"schema": {"oneOf": [{"$ref": "#/components/schemas/Key"}, {"$ref": "#/components/schemas/PartialUser"}]}}}}, "400": {"description": "Invalid Key."}, "401": {"description": "Missing Authorization. Authorization doesn't own key."}, "404": {"description": "Key not found, Key not found in specific project, Project not found."}}}}, "/key/create/": {"post": {"tags": ["API Keys"], "summary": "Create a new API Key.", "requestBody": {"required": true, "content": {"application/json": {"schema": {"$ref": "#/components/schemas/key.post"}}}}, "operationId": "key.createKey", "responses": {"200": {"description": "Successful operation. Returns the key ID."}, "400": {"description": "Missing body field. The response text will indicate the missing field."}, "401": {"description": "Missing Authorization."}, "404": {"description": "Project not found."}}}}, "/key/edit/": {"patch": {"tags": ["API Keys"], "summary": "Edit an API key.", "description": "Edit values of a key. Any values unpassed will remain the same.", "requestBody": {"required": true, "content": {"application/json": {"schema": {"$ref": "#/components/schemas/key.patch"}}}}, "operationId": "key.editKey", "responses": {"204": {"description": "Successful operation"}, "401": {"description": "Missing Authorization."}, "404": {"description": "Project not found. Key not found."}}}}, "/key/delete/{key_id}": {"delete": {"tags": ["API Keys"], "summary": "Delete an API key", "parameters": [{"in": "path", "name": "key_id", "schema": {"type": "string"}, "required": true}], "operationId": "key.deleteKey", "responses": {"204": {"description": "Successful operation."}, "401": {"description": "Missing Authorization."}, "404": {"description": "Key not found."}}}}, "/user/get/": {"get": {"tags": ["Users"], "summary": "Get the currently signed in profile.", "description": "Get details about a user.", "operationId": "user.get_user", "responses": {"200": {"description": "Successful operation.", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/User"}}}}, "401": {"description": "Missing Authorization."}}}}, "/user/keys/": {"get": {"tags": ["Users"], "summary": "Get all the API keys of a user.", "description": "Get all the API keys of a user, returns as a JSON list.", "operationId": "user.get_user_keys", "parameters": [{"in": "query", "name": "limit", "schema": {"type": "integer"}, "description": "The total number of users to list. Maximum of 50."}, {"in": "query", "name": "offset", "schema": {"type": "integer"}, "description": "Offset for search results."}], "responses": {"200": {"description": "Successful operation", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/Keys"}}}}, "401": {"description": "Missing Authorization."}}}}, "/user/projects/": {"get": {"tags": ["Users"], "summary": "Get all the projects a user has access to.", "description": "Returns all of the projects a user has access to as a JSON list.", "operationId": "user.get_user_projects", "parameters": [{"in": "query", "name": "limit", "schema": {"type": "integer"}, "description": "The total number of users to list. Maximum of 50."}, {"in": "query", "name": "offset", "schema": {"type": "integer"}, "description": "Offset for search results."}], "responses": {"200": {"description": "Successful operation", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/Projects"}}}}, "401": {"description": "Missing Authorization."}}}}, "/user/projects/all/": {"get": {"tags": ["Users"], "summary": "Get all the projects a user has access to.", "description": "Returns all of the projects a user has access to, and all other public projects and the user's approval status.", "parameters": [{"in": "query", "name": "limit", "schema": {"type": "integer"}, "description": "The total number of projects to list. Maximum of 50."}, {"in": "query", "name": "offset", "schema": {"type": "integer"}, "description": "Offset for search results."}], "operationId": "user.get_user_projects_all", "responses": {"200": {"description": "Successful operation", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/ProjectStatuses"}}}}, "401": {"description": "Missing Authorization.'"}}}}, "/user/tokenrefresh/": {"post": {"tags": ["Users"], "summary": "Reset normal and secure token for a user account.", "operationId": "user.refresh_token", "description": "This will refresh the tokens on a user account, in the event that one has been leaked. This requires any token, even the not priviledged one. The SecureAuthentication is the user's password, so to reset that the user must change their password.", "responses": {"200": {"description": "Successful operation."}, "401": {"description": "Unauthorized."}}}}, "/user/login/": {"post": {"tags": ["Users"], "summary": "Log in to an account.", "operationId": "user.login", "description": "This will also set 2 cookies, 'Authentication' which is the normal user.token, and 'SecureAuthentication', which is the user's hashed password. The 'SecureAuthentication' only lives for 15 minutes, whereas the 'Authentication' lives for 1 week.", "requestBody": {"required": true, "content": {"application/json": {"schema": {"$ref": "#/components/schemas/user.login"}}}}, "responses": {"200": {"description": "Successful operation.", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/User"}}}}, "400": {"description": "Missing body element. Username already registered. Username too long/short."}}}}, "/user/create/": {"post": {"tags": ["Users"], "summary": "Create a user.", "operationId": "user.create_user", "requestBody": {"required": true, "content": {"application/json": {"schema": {"$ref": "#/components/schemas/user.create"}}}}, "responses": {"200": {"description": "Successful operation.", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/User"}}}}, "400": {"description": "Missing body element. Username already registered. Username too long/short."}}}}, "/user/edit/": {"patch": {"tags": ["Users"], "summary": "Edit a user.", "description": "If editing the username or password, both must be passed due to how hashing passwords work.", "operationId": "user.edit_user", "requestBody": {"required": true, "content": {"application/json": {"schema": {"$ref": "#/components/schemas/user.create"}}}}, "responses": {"200": {"description": "Successful operation.", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/User"}}}}, "400": {"description": "Password provided but not username, or vice versa. Username already registered. Username too long/short."}, "401": {"description": "Unauthorized."}}}}, "/user/delete/": {"delete": {"tags": ["Users"], "summary": "Delete a user.", "operationId": "user.delete_user", "responses": {"204": {"description": "Successful operation."}, "401": {"description": "Unauthorized."}}}}, "/project/search/": {"get": {"tags": ["Projects"], "summary": "Search all public projects. Unauthenticated.", "parameters": [{"in": "query", "name": "q", "schema": {"type": "string"}, "description": "The case insensitive project name to search for."}, {"in": "query", "name": "limit", "schema": {"type": "integer"}, "description": "The total number of projects to list. Maximum of 50."}, {"in": "query", "name": "offset", "schema": {"type": "integer"}, "description": "Offset for search results."}], "description": "Searches and returns a list of projects based on the query. Pass no query to list all projects. If you are looking for projects the user has access to, use [/user/projects/](#/User/user/projects/).", "operationId": "project.search_projects", "responses": {"200": {"description": "Successful operation.", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/Projects"}}}}}}}, "/project/enroll/": {"post": {"tags": ["Projects"], "summary": "Apply to be added to a project.", "description": "Apply to be added to a project. If the project is public, user will be added automatically. If it is a private project, the user's status will change to 'pending', but will still be treated as denied. If the user is explicitly denied, they can not re-apply. If the user is allowed, their status will be 'approved'", "operationId": "project.enroll", "requestBody": {"required": true, "content": {"application/json": {"schema": {"$ref": "#/components/schemas/project.enroll"}}}}, "responses": {"204": {"description": "Successful operation."}, "400": {"description": "User already applied."}, "401": {"description": "Unauthorized."}, "403": {"description": "User is denied from project. Contact admin to grant access."}}}}, "/project/status/{project_name}/": {"get": {"tags": ["Projects"], "summary": "Get the users status for a project.", "description": "Gets the users status for a project. This will return a ProjectStatus json.", "parameters": [{"in": "path", "name": "project_name", "schema": {"type": "string"}, "required": true, "description": "Case insensitive project name to get status of."}], "operationId": "project.get_status", "responses": {"200": {"description": "Successful operation.", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/ProjectStatus"}}}}, "401": {"description": "Unauthorized."}, "404": {"description": "Project not found."}}}}, "/project/create/": {"post": {"tags": ["Projects"], "summary": "Create a project. Requires Super Admin.", "operationId": "project.create_project", "requestBody": {"required": true, "content": {"application/json": {"schema": {"$ref": "#/components/schemas/Project"}}}}, "responses": {"204": {"description": "Successful operation."}, "400": {"description": "Missing body element."}, "401": {"description": "Unuathorized."}}}}, "/project/edit/{project_name}/": {"patch": {"tags": ["Projects"], "summary": "Edit a project. Requires Super Admin.", "operationId": "project.edit_project", "parameters": [{"in": "path", "name": "project_name", "schema": {"type": "string"}, "required": true, "description": "Case insensitive project name to edit."}], "requestBody": {"required": true, "content": {"application/json": {"schema": {"$ref": "#/components/schemas/Project"}}}}, "responses": {"204": {"description": "Successful operation."}, "401": {"description": "Unauthorized."}, "404": {"description": "Project not found."}}}}, "/project/delete/{project_name}/": {"delete": {"tags": ["Projects"], "summary": "Delete a project. Requires Super Admin.", "operationId": "project.delete_project", "parameters": [{"in": "path", "name": "project_name", "schema": {"type": "string"}, "required": true, "description": "Case insensitive project name to delete."}], "responses": {"204": {"description": "Successful operation."}, "401": {"description": "Unauthorized"}}}}, "/project/getpending/{project_name}/": {"get": {"tags": ["Projects"], "summary": "Get users awaiting approval for projects. Requires Super Admin.", "description": "Get pending approvals for projects. Requires Super Admin to get the list, and requries Super Admin to POST approval back to server.", "parameters": [{"in": "path", "name": "project_name", "schema": {"type": "string"}, "required": true}, {"in": "query", "name": "limit", "schema": {"type": "integer"}, "description": "The total number of users to list. Maximum of 50."}, {"in": "query", "name": "offset", "schema": {"type": "integer"}, "description": "Offset for search results."}], "operationId": "project.get_pending_approvals", "responses": {"200": {"description": "Successful operation.", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/AwaitingApprovals"}}}}, "401": {"description": "Unauthorized."}}}}, "/project/approve/": {"post": {"tags": ["Projects"], "summary": "Approve/Deny a user for a project. Requires Super Admin.", "requestBody": {"required": true, "content": {"application/json": {"schema": {"$ref": "#/components/schemas/project.approval"}}}}, "operationId": "project.approve", "responses": {"204": {"description": "Successful operation."}, "400": {"description": "Missing body field."}, "401": {"description": "Unauthorized."}, "404": {"description": "User not found. Project not found."}}}}, "/project/getusers/{project_name}/": {"get": {"tags": ["Projects"], "summary": "Get users of a project. Requires Super Admin.", "description": "Gets a list of users for a project. Will also return users that are pending approval.", "operationId": "project.get_project_users", "parameters": [{"in": "path", "name": "project_name", "schema": {"type": "string"}, "required": true, "description": "Case insensitive project name to get."}, {"in": "query", "name": "limit", "schema": {"type": "integer"}, "description": "The total number of users to list. Maximum of 50."}, {"in": "query", "name": "offset", "schema": {"type": "integer"}, "description": "Offset for search results."}], "responses": {"200": {"description": "Successful operation.", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/ProjectUsers"}}}}, "401": {"description": "Unauthorized"}}}}}, "components": {"schemas": {"User": {"type": "object", "properties": {"name": {"type": "string", "example": "Sky"}, "email": {"type": "string", "description": "This is only available when using the user's username/password in the authentication.", "example": "sky@skystuff.cc"}, "super_admin": {"type": "boolean", "description": "If this field is set, projects should treat the user as an admin.", "example": true}, "token": {"type": "string", "description": "The user's token, similar use to the hashed username/password. This is only available when using the user's username/password in the authentication."}}}, "PartialUser": {"type": "object", "properties": {"name": {"type": "string", "example": "Sky"}, "super_admin": {"type": "boolean", "description": "If this field is set, projects should treat the user as an admin.", "example": true}}}, "Project": {"type": "object", "properties": {"name": {"type": "string", "example": "paste"}, "public": {"type": "boolean", "description": "This boolean is whether or not anybody can see this project. If it is false, users will be specifically added to it by an admin.", "example": false}, "open": {"type": "boolean", "description": "This boolean is whether or not anybody can join this project. If it is false, users must be approved for the project.", "example": true}}}, "Projects": {"type": "array", "items": {"$ref": "#/components/schemas/Project"}}, "ProjectStatus": {"allOf": [{"$ref": "#/components/schemas/Project"}, {"type": "object", "properties": {"approval": {"type": "string", "description": "The user's approval status for a project. One of; \"approved\", \"denied\", \"pending\", \"inactive\".", "example": "inactive"}}}]}, "ProjectStatuses": {"type": "array", "items": {"$ref": "#/components/schemas/ProjectStatus"}}, "Key": {"type": "object", "properties": {"name": {"type": "string", "description": "Key name, maximum 256 characters.", "example": "A generic API Key"}, "data": {"type": "string", "description": "Base64 (optionally) encoded data to store with the key.", "example": "c3VwZXIgc2VjcmV0"}, "id": {"type": "string", "description": "The 128 random character ID of the key. This is the authorization for it."}, "user": {"$ref": "#/components/schemas/User"}, "project": {"$ref": "#/components/schemas/Project"}}}, "Keys": {"type": "array", "items": {"$ref": "#/components/schemas/Key"}}, "AwaitingApproval": {"type": "object", "properties": {"user": {"$ref": "#/components/schemas/PartialUser"}, "project": {"$ref": "#/components/schemas/Project"}}}, "AwaitingApprovals": {"type": "array", "items": {"$ref": "#/components/schemas/AwaitingApproval"}}, "ProjectUser": {"type": "object", "properties": {"user": {"$ref": "#/components/schemas/PartialUser"}, "approval": {"type": "string", "description": "The user's approval status for a project. One of; \"approved\", \"pending\".", "example": "pending"}}}, "ProjectUsers": {"type": "object", "allOf": [{"$ref": "#/components/schemas/Project"}, {"type": "object", "properties": {"users": {"type": "array", "items": {"$ref": "#/components/schemas/ProjectUser"}}}}]}, "key.post": {"type": "object", "properties": {"name": {"type": "string", "description": "Key name, maximum 256 characters.", "example": "A generic API Key"}, "data": {"type": "string", "description": "Base64 (optionally) encoded data to store with the key.", "example": "c3VwZXIgc2VjcmV0"}, "project": {"type": "string", "description": "Case insensitive project name.", "example": "paste"}}}, "key.patch": {"type": "object", "properties": {"id": {"type": "string", "description": "The 128 character random string obtained from GET."}, "name": {"type": "string", "description": "Key name, maximum 256 characters.", "example": "A generic API Key"}, "data": {"type": "string", "description": "Base64 (optionally) encoded data to store with the key.", "example": "c3VwZXIgc2VjcmV0"}, "project": {"type": "string", "description": "Case insensitive project name.", "example": "paste"}}}, "user.create": {"type": "object", "properties": {"name": {"type": "string", "description": "Username of the user.", "example": "Sky"}, "password": {"type": "string", "description": "Password of the user.", "example": "AVerySecurePassword"}, "email": {"type": "string", "description": "Email of the user.", "example": "sky@skystuff.cc"}}}, "user.login": {"type": "object", "properties": {"name": {"type": "string", "description": "Username of the user.", "example": "Sky"}, "password": {"type": "string", "description": "Password of the user.", "example": "AVerySecurePassword"}}}, "project.enroll": {"type": "object", "properties": {"name": {"type": "string", "description": "Name of the project to enroll for.", "example": "paste"}}}, "project.approval": {"type": "object", "properties": {"user": {"type": "string", "description": "Name of the user that is being approved/denied."}, "project": {"type": "string", "description": "Name of project that is being approved/denied"}, "approved": {"type": "boolean", "description": "Approval status. True if approved, false if denied."}}}}, "securitySchemes": {"bearerAuth": {"type": "http", "scheme": "bearer", "bearerFormat": "JWT"}, "cookieAuth": {"type": "apiKey", "in": "cookie", "name": "Authorization"}}}};
  // Build a system
  const ui = SwaggerUIBundle({
    spec: spec,
    dom_id: '#swagger-ui',
    deepLinking: true,
    presets: [
      SwaggerUIBundle.presets.apis,
      SwaggerUIStandalonePreset
    ],
    plugins: [
      SwaggerUIBundle.plugins.DownloadUrl
    ],
    layout: "StandaloneLayout"
  })
  window.ui = ui

  var elements = document.getElementsByClassName("topbar");
  while(elements.length > 0){
      elements[0].parentNode.removeChild(elements[0]);
  }
}
</script>
</body>
</html>